"use strict";(self.webpackChunknetdb=self.webpackChunknetdb||[]).push([[757],{7319:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=t(7462),r=(t(7294),t(3905));const i={sidebar_position:1,slug:"ospf"},o="Open Shortest Path First (OSPF)",s={unversionedId:"ospf",id:"ospf",title:"Open Shortest Path First (OSPF)",description:"OSFP is a link state routing protocol, which means the routers exchange information with their nearest neighbors using Link State Advertisements (LSAs) and populate the Link State Database (LSDB).",source:"@site/docs/ospf.md",sourceDirName:".",slug:"/ospf",permalink:"/netdb/ospf",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"ospf"},sidebar:"tutorialSidebar",previous:{title:"Intro",permalink:"/netdb/"}},l={},p=[{value:"OSFP neighbor relationship",id:"osfp-neighbor-relationship",level:2},{value:"LSA types",id:"lsa-types",level:2},{value:"Link State exchange",id:"link-state-exchange",level:2},{value:"Basic OSPF Lab",id:"basic-ospf-lab",level:2},{value:"Topology",id:"topology",level:3},{value:"R1",id:"r1",level:4},{value:"R2",id:"r2",level:4},{value:"R3",id:"r3",level:4},{value:"Show commands to confirm",id:"show-commands-to-confirm",level:3},{value:"R1",id:"r1-1",level:4},{value:"R2",id:"r2-1",level:4},{value:"R3",id:"r3-1",level:4},{value:"Basic OSPF Lab 2",id:"basic-ospf-lab-2",level:2},{value:"Topology",id:"topology-1",level:3},{value:"R1",id:"r1-2",level:4},{value:"R2",id:"r2-2",level:4},{value:"R3",id:"r3-2",level:4},{value:"R4",id:"r4",level:4},{value:"R5",id:"r5",level:4},{value:"R6",id:"r6",level:4},{value:"NYSE",id:"nyse",level:4}],c={toc:p};function d(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"open-shortest-path-first-ospf"},"Open Shortest Path First (OSPF)"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{width:"460",height:"300",src:"/netdb/img/networkdiagrams/OSPF.svg"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"OSFP")," is a link state routing protocol, which means the routers exchange information with their nearest neighbors using Link State Advertisements (LSAs) and populate the Link State Database (LSDB). "),(0,r.kt)("h2",{id:"osfp-neighbor-relationship"},"OSFP neighbor relationship"),(0,r.kt)("p",null,"There are 5 types of messages "),(0,r.kt)("h2",{id:"lsa-types"},"LSA types"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type 1 - Router LSA ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"each router in the area will flood LSA type 1 to all routers within the same area. "))),(0,r.kt)("li",{parentName:"ul"},"Type 2 - Network LSA",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"}))),(0,r.kt)("li",{parentName:"ul"},"Type 3 - Summary LSA"),(0,r.kt)("li",{parentName:"ul"},"Type 4 - Summary ASBR LSA"),(0,r.kt)("li",{parentName:"ul"},"Type 5 - Autonomous System External LSA"),(0,r.kt)("li",{parentName:"ul"},"Type 6 - Multicast OSPF LSA"),(0,r.kt)("li",{parentName:"ul"},"Type 7 - Not-so-stubby area LSA"),(0,r.kt)("li",{parentName:"ul"},"Type 8 - External attribute LSA for BGP")),(0,r.kt)("h2",{id:"link-state-exchange"},"Link State exchange"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Link State Request (LSR)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Link State Advertisement (LSA)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Link State Update (LSU)"))),(0,r.kt)("h2",{id:"basic-ospf-lab"},"Basic OSPF Lab"),(0,r.kt)("h3",{id:"topology"},"Topology"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{width:"500",height:"500",src:"/netdb/img/networkdiagrams/OSPFLab.svg"})),(0,r.kt)("h4",{id:"r1"},"R1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R1\n!\ninterface Ethernet1\n   no switchport\n   ip address 1.1.1.1/30\n!\ninterface Ethernet2\n   no switchport\n   ip address 2.2.2.1/30\n!\nip routing\n!\nrouter ospf 1\n   network 1.1.1.0/30 area 0.0.0.1\n   network 2.2.2.0/30 area 0.0.0.1\n   max-lsa 12000\n!\n")),(0,r.kt)("h4",{id:"r2"},"R2"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R2\n!\ninterface Ethernet1\n   no switchport\n   ip address 1.1.1.2/30\n!\ninterface Loopback0\n   ip address 172.16.1.1/16\n!\nip routing\n!\nrouter ospf 2\n   network 1.1.1.0/30 area 0.0.0.1\n   network 172.16.0.0/16 area 0.0.0.2\n   max-lsa 12000\n!\n")),(0,r.kt)("h4",{id:"r3"},"R3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R3\n!\ninterface Ethernet2\n   no switchport\n   ip address 2.2.2.2/30\n!\ninterface Loopback0\n   ip address 10.0.0.1/16\n!\nip routing\n!\nrouter ospf 3\n   network 2.2.2.0/30 area 0.0.0.1\n   network 10.0.0.0/16 area 0.0.0.3\n   max-lsa 12000\n!\n")),(0,r.kt)("h3",{id:"show-commands-to-confirm"},"Show commands to confirm"),(0,r.kt)("h4",{id:"r1-1"},"R1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"R1#show ip ospf neighbor\nNeighbor ID     Instance VRF      Pri State                  Dead Time   Address         Interface\n172.16.1.1      1        default  1   FULL/BDR               00:00:29    1.1.1.2         Ethernet1\n10.0.0.1        1        default  1   FULL/DR                00:00:38    2.2.2.2         Ethernet2\n\nR1#show ip route\n\nVRF: default\nCodes: C - connected, S - static, K - kernel,\n       O - OSPF, IA - OSPF inter area, E1 - OSPF external type 1,\n       E2 - OSPF external type 2, N1 - OSPF NSSA external type 1,\n       N2 - OSPF NSSA external type2, B - Other BGP Routes,\n       B I - iBGP, B E - eBGP, R - RIP, I L1 - IS-IS level 1,\n       I L2 - IS-IS level 2, O3 - OSPFv3, A B - BGP Aggregate,\n       A O - OSPF Summary, NG - Nexthop Group Static Route,\n       V - VXLAN Control Service, M - Martian,\n       DH - DHCP client installed default route,\n       DP - Dynamic Policy Route, L - VRF Leaked,\n       G  - gRIBI, RC - Route Cache Route\n\nGateway of last resort is not set\n\n C        1.1.1.0/30 is directly connected, Ethernet1\n C        2.2.2.0/30 is directly connected, Ethernet2\n\n")),(0,r.kt)("p",null,"R1 is only learning connected routes becuase is not part of OSPF area2 or OSPF area3"),(0,r.kt)("h4",{id:"r2-1"},"R2"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"R2#show ip ospf neighbor\nNeighbor ID     Instance VRF      Pri State                  Dead Time   Address         Interface\n2.2.2.1         2        default  1   FULL/DR                00:00:36    1.1.1.1         Ethernet1\n\nR2#show ip route\n\nVRF: default\nCodes: C - connected, S - static, K - kernel,\n       O - OSPF, IA - OSPF inter area, E1 - OSPF external type 1,\n       E2 - OSPF external type 2, N1 - OSPF NSSA external type 1,\n       N2 - OSPF NSSA external type2, B - Other BGP Routes,\n       B I - iBGP, B E - eBGP, R - RIP, I L1 - IS-IS level 1,\n       I L2 - IS-IS level 2, O3 - OSPFv3, A B - BGP Aggregate,\n       A O - OSPF Summary, NG - Nexthop Group Static Route,\n       V - VXLAN Control Service, M - Martian,\n       DH - DHCP client installed default route,\n       DP - Dynamic Policy Route, L - VRF Leaked,\n       G  - gRIBI, RC - Route Cache Route\n\nGateway of last resort is not set\n\n C        1.1.1.0/30 is directly connected, Ethernet1\n O        2.2.2.0/30 [110/20] via 1.1.1.1, Ethernet1\n C        172.16.0.0/16 is directly connected, Loopback0\n")),(0,r.kt)("p",null,"R2 is learning connected routes and OSPF routes from R1"),(0,r.kt)("h4",{id:"r3-1"},"R3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"R3#sh ospf neighbor\nR3#sh ip ospf neighbor\nNeighbor ID     Instance VRF      Pri State                  Dead Time   Address         Interface\n2.2.2.1         3        default  1   FULL/BDR               00:00:33    2.2.2.1         Ethernet2\n\nR3#show ip route\n\nVRF: default\nCodes: C - connected, S - static, K - kernel,\n       O - OSPF, IA - OSPF inter area, E1 - OSPF external type 1,\n       E2 - OSPF external type 2, N1 - OSPF NSSA external type 1,\n       N2 - OSPF NSSA external type2, B - Other BGP Routes,\n       B I - iBGP, B E - eBGP, R - RIP, I L1 - IS-IS level 1,\n       I L2 - IS-IS level 2, O3 - OSPFv3, A B - BGP Aggregate,\n       A O - OSPF Summary, NG - Nexthop Group Static Route,\n       V - VXLAN Control Service, M - Martian,\n       DH - DHCP client installed default route,\n       DP - Dynamic Policy Route, L - VRF Leaked,\n       G  - gRIBI, RC - Route Cache Route\n\nGateway of last resort is not set\n\n O        1.1.1.0/30 [110/20] via 2.2.2.1, Ethernet2\n C        2.2.2.0/30 is directly connected, Ethernet2\n C        10.0.0.0/16 is directly connected, Loopback0\n")),(0,r.kt)("p",null,"R3 is learning connected routes and OSPF routes from R1"),(0,r.kt)("h2",{id:"basic-ospf-lab-2"},"Basic OSPF Lab 2"),(0,r.kt)("h3",{id:"topology-1"},"Topology"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{width:"500",height:"500",src:"/netdb/img/networkdiagrams/OSPFLab.svg"})),(0,r.kt)("h4",{id:"r1-2"},"R1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R1\n!\ninterface Ethernet1\n   no switchport\n   ip address 11.11.11.1/30\n!\ninterface Ethernet2\n!\ninterface Ethernet3\n   no switchport\n   ip address 33.33.33.2/30\n!\ninterface Loopback0\n   ip address 1.1.1.1/32\n!\ninterface Management1\n!\nip routing\n!\nrouter bgp 1111\n   neighbor 11.11.11.2 remote-as 7777\n!\nrouter ospf 1\n   redistribute bgp\n   network 33.33.33.0/30 area 0.0.0.0\n   max-lsa 12000\n!\nend\n")),(0,r.kt)("h4",{id:"r2-2"},"R2"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R2\n!\ninterface Ethernet1\n!\ninterface Ethernet2\n   no switchport\n   ip address 22.22.22.1/30\n!\ninterface Ethernet7\n   no switchport\n   ip address 77.77.77.2/30\n!\ninterface Ethernet8\n!\ninterface Loopback0\n   ip address 2.2.2.2/32\n!\ninterface Management1\n!\nip routing\n!\nrouter bgp 1111\n   neighbor 77.77.77.1 remote-as 7777\n!\nrouter ospf 1\n   network 22.22.22.0/30 area 0.0.0.0\n   max-lsa 12000\n!\nend\n")),(0,r.kt)("h4",{id:"r3-2"},"R3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R3\n!\ninterface Ethernet1\n!\ninterface Ethernet2\n   no switchport\n   ip address 22.22.22.2/30\n!\ninterface Ethernet3\n   no switchport\n   ip address 33.33.33.1/30\n!\ninterface Ethernet4\n   no switchport\n   ip address 44.44.44.2/30\n!\ninterface Ethernet5\n   no switchport\n   ip address 55.55.55.2/30\n!\ninterface Loopback0\n   ip address 3.3.3.3/32\n!\ninterface Management1\n!\nip routing\n!\nrouter ospf 1\n   network 22.22.22.0/30 area 0.0.0.0\n   network 33.33.33.0/30 area 0.0.0.0\n   network 44.44.44.0/30 area 0.0.0.0\n   network 55.55.55.0/30 area 0.0.0.0\n   max-lsa 12000\n!\nend\n")),(0,r.kt)("h4",{id:"r4"},"R4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R4\n!\ninterface Ethernet1\n!\ninterface Ethernet2\n!\ninterface Ethernet3\n!\ninterface Ethernet4\n   no switchport\n   ip address 44.44.44.1/30\n!\ninterface Ethernet5\n!\ninterface Ethernet6\n   no switchport\n   ip address 88.88.88.1/30\n!\ninterface Ethernet7\n!\ninterface Ethernet8\n!\ninterface Ethernet9\n!\ninterface Loopback0\n   ip address 4.4.4.4/32\n!\ninterface Management1\n!\nip routing\n!\nrouter ospf 1\n   network 44.44.44.0/30 area 0.0.0.0\n   network 88.88.88.0/30 area 0.0.0.2\n   max-lsa 12000\n!\nend\n")),(0,r.kt)("h4",{id:"r5"},"R5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R5\n!\ninterface Ethernet5\n   no switchport\n   ip address 55.55.55.1/30\n!\ninterface Ethernet6\n!\ninterface Ethernet7\n!\ninterface Ethernet8\n   no switchport\n   ip address 66.66.66.2/30\n!\ninterface Ethernet9\n!\ninterface Loopback0\n   ip address 5.5.5.5/32\n!\ninterface Management1\n!\nip routing\n!\nrouter ospf 1\n   network 55.55.55.0/30 area 0.0.0.0\n   network 66.66.66.0/30 area 0.0.0.2\n   max-lsa 12000\n!\nend\n")),(0,r.kt)("h4",{id:"r6"},"R6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname R6\n!\ninterface Ethernet1\n!\ninterface Ethernet6\n   no switchport\n   ip address 88.88.88.2/30\n!\ninterface Ethernet7\n!\ninterface Ethernet8\n   no switchport\n   ip address 66.66.66.1/30\n!\ninterface Ethernet9\n!\ninterface Loopback0\n   ip address 6.6.6.6/32\n!\ninterface Management1\n!\nip routing\n!\nrouter ospf 1\n   network 66.66.66.0/30 area 0.0.0.2\n   network 88.88.88.0/30 area 0.0.0.2\n   max-lsa 12000\n!\nend\n")),(0,r.kt)("h4",{id:"nyse"},"NYSE"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"hostname NYSE\n!\ninterface Ethernet1\n   no switchport\n   ip address 11.11.11.2/30\n!\ninterface Ethernet7\n   no switchport\n   ip address 77.77.77.1/30\n!\ninterface Ethernet8\n!\ninterface Loopback0\n   ip address 7.7.7.7/32\n!\ninterface Management1\n!\nip routing\n!\nrouter bgp 7777\n   neighbor 11.11.11.1 remote-as 1111\n   neighbor 77.77.77.2 remote-as 1111\n   redistribute connected\n!\nrouter ospf 1\n   network 7.7.7.7/32 area 0.0.0.1\n   network 11.11.11.0/30 area 0.0.0.1\n   max-lsa 12000\n!\nend\n")))}d.isMDXComponent=!0}}]);